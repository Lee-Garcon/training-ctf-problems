from flask import Flask, request, render_template, url_for
import subprocess
import os

cpath = os.path.dirname(os.path.realpath(__file__)) #get current path

app = Flask(__name__) #flask instance
command = 'cat ' + cpath + '/files/%s;' #print out the file. This is secure, right, guys?


@app.route('/', methods=['GET'])
def index():
	return render_template('index.html')

@app.route('/file', methods=['GET'])
def file():
	if request.args.get('f'):
		file_str = request.args.get('f')
	else:
		return render_template('file.html')

	command_str = command % file_str
	out = subprocess.check_output(command_str, stderr=subprocess.STDOUT, shell=True)
	return render_template('file_cat.html', file_txt = out.decode('ascii'))
